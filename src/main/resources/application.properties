# Server Configuration
server.port=${SERVER_PORT:8085}

# Swagger/OpenAPI Configuration
springdoc.swagger-ui.server-url=${SERVER_URL:http://localhost:8085}
springdoc.api-docs.path=/swagger
springdoc.swagger-ui.path=/swagger/index.html

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=200MB
spring.servlet.multipart.max-request-size=200MB

# Logging Configuration
logging.config=classpath:logback-spring.xml
logging.file.path=${LOG_PATH:./logs}
logging.level.root=${LOG_LEVEL:INFO}
logging.level.io.mersel.dss.signer.api=${LOG_LEVEL:INFO}

# Application Info
spring.application.name=mersel-dss-signer-api
info.app.name=Mersel DSS Signer API
info.app.description=Dijital Imza Servisi API
info.app.version=@project.version@

# CORS Configuration
# Production ortamında spesifik domain'ler kullanın
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:*}
cors.allowed-methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
cors.max-age=${CORS_MAX_AGE:3600}

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,prometheus,metrics
management.health.defaults.enabled=true
management.info.env.enabled=true

# Prometheus Metrics Configuration
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.tags.application=${spring.application.name}

# ============================================
# Keystore Configuration (Environment Variables)
# ============================================
# Aşağıdaki yapılandırmalar environment variable olarak verilmelidir.
# Örnek: export PKCS11_LIBRARY=/path/to/library.so

# --- PKCS#11 (HSM) Yapılandırması ---
# PKCS11_LIBRARY=/usr/lib/softhsm/libsofthsm2.so
# PKCS11_SLOT=0
# CERTIFICATE_PIN=your-hsm-pin

# --- PFX Dosyası Yapılandırması ---
# PFX_PATH=/path/to/certificate.pfx
# CERTIFICATE_PIN=your-password

# --- Sertifika Seçimi (İsteğe Bağlı) ---
# Keystore içinde birden fazla sertifika varsa seçim yapabilirsiniz:
#
# Yöntem 1: Alias ile seçim (önerilen, hızlı erişim)
# CERTIFICATE_ALIAS=my-signing-cert
#
# Yöntem 2: Serial number ile seçim (hexadecimal format)
# CERTIFICATE_SERIAL_NUMBER=1234567890ABCDEF
#
# Not: 
# - Hem alias hem de serial number belirtilirse önce alias denenir
# - Hiçbiri belirtilmezse keystore'daki ilk uygun sertifika kullanılır
# - Serial number hex formatında olmalıdır (örn: 4E7B8A92D13F5C6A)
# - Detaylı bilgi: docs/CERTIFICATE_SELECTION.md

# --- Sertifika Zinciri Yapılandırması ---
# CERTIFICATE_CHAIN_GET_ONLINE=true
# ISSUER_CERTIFICATE_PATH=/path/to/issuer.cer
# CA_CERTIFICATE_PATH=/path/to/ca.cer

# --- Zaman Damgası (Timestamp) Yapılandırması ---
# TS_SERVER_HOST=http://zd.kamusm.gov.tr
# TS_USER_ID=your-user-id
# TS_USER_PASSWORD=your-password
# TS_DIGEST_ALGORITHM=SHA-256

# --- TÜBİTAK ESYA Zaman Damgası ---
# IS_TUBITAK_TSP=true
# MA3API_LICENSE_PATH=/path/to/license.dat

# --- Performans Yapılandırması ---
# MAX_SESSION_COUNT=5

# --- KamuSM Kök Sertifika Deposu ---
# CERTSTORE_PATH=SertifikaDeposu.svt